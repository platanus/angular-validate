/**
 * Angular Validation Framework
 * @version v0.1.1 - 2014-10-06
 * @link https://github.com/platanus/angular-validate
 * @author Ignacio Baixas <ignacio@platan.us>
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
!function(a,b){"use strict";function c(a,b){for(var c,d=0,e=0,f=0,g=0,h=0,i=[],j=0,k=a.length;k>j;j++)c=a[j],g?"'"===c?g=g%2?0:1:"\\"===c?g++:g=1:"'"===c?g=1:"["===c?d++:"]"===c?d--:"{"===c?e++:"}"===c?e--:"("===c?f++:")"===c?f--:c!==b||d||f||e||(i.push(a.substring(h,j)),h=j+1);return d||f||e||g?null:(i.push(a.substring(h)),i)}var d={};a.module("platanus.validate",["platanus.inflector"]).directive("validate",["$parse","$injector","$inflector",function(d,e,f){return{restrict:"AC",require:"ngModel",link:function(g,h,i,j){var k=[];a.forEach(c(i.validate,","),function(a){var b=a.match(/^\s*(is\s+)?(.*?)(\s+as\s+([^\s]+))?\s*$/i),c={};if(b){if(b[3]&&(c.as=f.camelize(b[4])),b[1])c.dyn=d(b[2]);else{if(b=b[2].match(/^(\w[\w\d-]+)(?::(.*?))?$/),!b)return;c.as||(c.as=f.camelize(b[1])),c.fun=e.get(f.camelize(b[1],!0)+"Validator"),b[2]&&(c.dyn=d(b[2]))}k.push(c)}}),j.$parsers.push(function(c){for(var d,e,f=0,h=!0;d=k[f++];)e=d.dyn?d.dyn(g,{$value:c}):[],d.fun&&(a.isArray(e)||(e=[e]),e.unshift(c),e=d.fun.apply(null,e)),j.$setValidity(d.as||"validate",e),e||(h=!1);return h?c:b})}}}]).directive("validationGroup",["$timeout",function(c){return{restrict:"AC",require:"ngModel",link:function(e,f,g,h){var i=g.validationGroup,j=!1;"!"===i[0]&&(i=i.substr(1),j=!0);var k=d[i];k===b&&(k=d[g.validationGroup]=[]),k.push({model:h,always:j}),e.$watch(function(){return h.$viewValue},function(){h.$invalid||a.forEach(k,function(a){h!==a.model&&(a.always||a.model.$invalid)&&c(function(){a.model.$setViewValue(a.model.$viewValue)},0)})}),f.on("$destroy",function(){for(var a=k.length-1;a>=0;a--)k[a]===h&&k.splice(a,1)})}}}]).constant("RequiredValidator",function(a){return!!a}).constant("MatchValidator",function(a,b){return a?new RegExp(b).test(a):!0})}(angular);